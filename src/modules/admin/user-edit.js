var UserEditController = (function () {
    function UserEditController($location, UserService, routeParamsSvc) {
        this.$location = $location;
        this.UserService = UserService;
        this.routeParamsSvc = routeParamsSvc;
        this.userId = this.routeParamsSvc['userid'];
        if (!this.userId) {
            this.getUserByUserId('me');
        }
        else {
            this.getUserByUserId(this.userId);
        }
    }
    UserEditController.prototype.getUserByUserId = function (userId) {
        var _this = this;
        this.UserService.getUserByUserId(userId).then(function (user) {
            _this.userId = user.username;
            _this.firstName = user.firstname;
            _this.lastName = user.lastname;
            _this.email = user.email;
            _this.status = user.status;
            _this.notificationenabled = user.notificationenabled;
        });
    };
    UserEditController.prototype.saveSettings = function (modalHide) {
        var _this = this;
        this.errorMessage = "";
        if (this.password === this.confirmpassword && this.password.length > 0) {
            var setting = {
                password: this.password,
                oldpassword: this.oldpassword
            };
            this.UserService.saveUserSetting(this.userId, setting).then(function (result) {
                if (result.status === 200) {
                    modalHide();
                }
            }).catch(function (result) {
                if (result.status === 500) {
                    _this.errorMessage = "Old password does not match!";
                }
            });
        }
        else {
            this.errorMessage = "Confirm password does not match!";
        }
    };
    UserEditController.prototype.save = function () {
        var _this = this;
        var user = {
            email: this.email,
            firstname: this.firstName,
            lastname: this.lastName,
            groups: [],
            role: "admin"
        };
        if (this.password && this.password.length > 0) {
            user.password = this.password;
        }
        user.status = this.status;
        user.notificationenabled = this.notificationenabled;
        this.UserService.updateUser(this.userId, user).then(function (result) {
            if (result.status === 200) {
                _this.$location.path('/admin');
            }
        });
    };
    UserEditController.prototype.deleteUser = function (userId) {
        var _this = this;
        this.UserService.deleteUser(userId).then(function (result) {
            if (result.status === 200) {
                _this.$location.path('/admin');
            }
        });
    };
    UserEditController.prototype.cancel = function () {
        this.$location.path('/admin');
    };
    UserEditController.$inject = [
        '$location',
        'UserService',
        '$routeParams',
    ];
    return UserEditController;
})();
exports.UserEditController = UserEditController;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvYWRtaW4vdXNlci1lZGl0LnRzIl0sIm5hbWVzIjpbIlVzZXJFZGl0Q29udHJvbGxlciIsIlVzZXJFZGl0Q29udHJvbGxlci5jb25zdHJ1Y3RvciIsIlVzZXJFZGl0Q29udHJvbGxlci5nZXRVc2VyQnlVc2VySWQiLCJVc2VyRWRpdENvbnRyb2xsZXIuc2F2ZVNldHRpbmdzIiwiVXNlckVkaXRDb250cm9sbGVyLnNhdmUiLCJVc2VyRWRpdENvbnRyb2xsZXIuZGVsZXRlVXNlciIsIlVzZXJFZGl0Q29udHJvbGxlci5jYW5jZWwiXSwibWFwcGluZ3MiOiJBQUVBO0lBbUJJQSw0QkFDWUEsU0FBOEJBLEVBQzlCQSxXQUF3QkEsRUFDeEJBLGNBQTRDQTtRQUY1Q0MsY0FBU0EsR0FBVEEsU0FBU0EsQ0FBcUJBO1FBQzlCQSxnQkFBV0EsR0FBWEEsV0FBV0EsQ0FBYUE7UUFDeEJBLG1CQUFjQSxHQUFkQSxjQUFjQSxDQUE4QkE7UUFDcERBLElBQUlBLENBQUNBLE1BQU1BLEdBQUlBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBQzdDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNmQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUMvQkEsQ0FBQ0E7UUFDREEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDRkEsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFDdENBLENBQUNBO0lBQ0xBLENBQUNBO0lBRU1ELDRDQUFlQSxHQUF0QkEsVUFBdUJBLE1BQU1BO1FBQTdCRSxpQkFTQ0E7UUFSR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsZUFBZUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBQ0EsSUFBU0E7WUFDcERBLEtBQUlBLENBQUNBLE1B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QUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFDQSxNQUFNQTtZQUN0REEsRUFBRUEsQ0FBQUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3ZCQSxLQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtZQUNsQ0EsQ0FBQ0E7UUFDTEEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDUEEsQ0FBQ0E7SUFFTUosdUNBQVVBLEdBQWpCQSxVQUFrQkEsTUFBTUE7UUFBeEJLLGlCQU1DQTtRQUxHQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxVQUFVQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFDQSxNQUFNQTtZQUM1Q0EsRUFBRUEsQ0FBQUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3ZCQSxLQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtZQUNsQ0EsQ0FBQ0E7UUFDTEEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDUEEsQ0FBQ0E7SUFFTUwsbUNBQU1BLEdBQWJBO1FBRUlNLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO0lBQ2xDQSxDQUFDQTtJQW5GTU4sMEJBQU9BLEdBQWtCQTtRQUM1QkEsV0FBV0E7UUFDWEEsYUFBYUE7UUFDYkEsY0FBY0E7S0FDakJBLENBQUNBO0lBZ0ZOQSx5QkFBQ0E7QUFBREEsQ0FqR0EsQUFpR0NBLElBQUE7QUFqR1ksMEJBQWtCLHFCQWlHOUIsQ0FBQSIsImZpbGUiOiJtb2R1bGVzL2FkbWluL3VzZXItZWRpdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VXNlclNlcnZpY2V9IGZyb20gJy4uL3Jlc3QvdXNlcic7XG5cbmV4cG9ydCBjbGFzcyBVc2VyRWRpdENvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgZXJyb3JNc2c7XG4gICAgcHJpdmF0ZSB1c2VySWQ6c3RyaW5nO1xuICAgIHByaXZhdGUgZmlyc3ROYW1lOnN0cmluZztcbiAgICBwcml2YXRlIGxhc3ROYW1lOnN0cmluZztcbiAgICBwcml2YXRlIGVtYWlsOnN0cmluZztcbiAgICBwcml2YXRlIHBhc3N3b3JkOnN0cmluZztcbiAgICBwcml2YXRlIGNvbmZpcm1wYXNzd29yZDpzdHJpbmc7XG4gICAgcHJpdmF0ZSBvbGRwYXNzd29yZDpzdHJpbmc7XG4gICAgcHJpdmF0ZSBzdGF0dXM6Ym9vbGVhbjtcbiAgICBwcml2YXRlIG5vdGlmaWNhdGlvbmVuYWJsZWQ6Ym9vbGVhbjtcbiAgICBwcml2YXRlIGVycm9yTWVzc2FnZTpzdHJpbmc7XG5cbiAgICBzdGF0aWMgJGluamVjdDogQXJyYXk8c3RyaW5nPiA9IFtcbiAgICAgICAgJyRsb2NhdGlvbicsXG4gICAgICAgICdVc2VyU2VydmljZScsXG4gICAgICAgICckcm91dGVQYXJhbXMnLFxuICAgIF07XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSAkbG9jYXRpb246IG5nLklMb2NhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgVXNlclNlcnZpY2U6IFVzZXJTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHJvdXRlUGFyYW1zU3ZjOiBuZy5yb3V0ZS5JUm91dGVQYXJhbXNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gIHRoaXMucm91dGVQYXJhbXNTdmNbJ3VzZXJpZCddO1xuICAgICAgICBpZiAoIXRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICB0aGlzLmdldFVzZXJCeVVzZXJJZCgnbWUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckJ5VXNlcklkKHRoaXMudXNlcklkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgIFxuICAgIHB1YmxpYyBnZXRVc2VyQnlVc2VySWQodXNlcklkKTp2b2lke1xuICAgICAgICB0aGlzLlVzZXJTZXJ2aWNlLmdldFVzZXJCeVVzZXJJZCh1c2VySWQpLnRoZW4oKHVzZXI6IGFueSk9PntcbiAgICAgICAgICAgIHRoaXMudXNlcklkID0gdXNlci51c2VybmFtZTtcbiAgICAgICAgICAgIHRoaXMuZmlyc3ROYW1lID0gdXNlci5maXJzdG5hbWU7XG4gICAgICAgICAgICB0aGlzLmxhc3ROYW1lID0gdXNlci5sYXN0bmFtZTtcbiAgICAgICAgICAgIHRoaXMuZW1haWwgPSB1c2VyLmVtYWlsO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB1c2VyLnN0YXR1cztcbiAgICAgICAgICAgIHRoaXMubm90aWZpY2F0aW9uZW5hYmxlZCA9IHVzZXIubm90aWZpY2F0aW9uZW5hYmxlZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNhdmVTZXR0aW5ncyhtb2RhbEhpZGUpOnZvaWQge1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgICAgIGlmKHRoaXMucGFzc3dvcmQgPT09IHRoaXMuY29uZmlybXBhc3N3b3JkICYmIHRoaXMucGFzc3dvcmQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIHNldHRpbmcgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBvbGRwYXNzd29yZDogdGhpcy5vbGRwYXNzd29yZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuVXNlclNlcnZpY2Uuc2F2ZVVzZXJTZXR0aW5nKHRoaXMudXNlcklkLHNldHRpbmcpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5zdGF0dXMgPT09IDIwMCl7XG4gICAgICAgICAgICAgICAgICAgICBtb2RhbEhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaCgocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYocmVzdWx0LnN0YXR1cyA9PT0gNTAwKXtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBcIk9sZCBwYXNzd29yZCBkb2VzIG5vdCBtYXRjaCFcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBcIkNvbmZpcm0gcGFzc3dvcmQgZG9lcyBub3QgbWF0Y2ghXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc2F2ZSgpOnZvaWQge1xuICAgICAgICB2YXIgdXNlcjogYW55ID0ge1xuICAgICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsXG4gICAgICAgICAgICBmaXJzdG5hbWU6IHRoaXMuZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdG5hbWU6IHRoaXMubGFzdE5hbWUsXG4gICAgICAgICAgICBncm91cHM6IFtdLFxuICAgICAgICAgICAgcm9sZTogXCJhZG1pblwiXG4gICAgICAgIH07XG4gICAgICAgIGlmKHRoaXMucGFzc3dvcmQgJiYgdGhpcy5wYXNzd29yZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB1c2VyLnBhc3N3b3JkID0gdGhpcy5wYXNzd29yZDtcbiAgICAgICAgfVxuICAgICAgICB1c2VyLnN0YXR1cyA9IHRoaXMuc3RhdHVzO1xuICAgICAgICB1c2VyLm5vdGlmaWNhdGlvbmVuYWJsZWQgPSB0aGlzLm5vdGlmaWNhdGlvbmVuYWJsZWQ7XG5cbiAgICAgICAgdGhpcy5Vc2VyU2VydmljZS51cGRhdGVVc2VyKHRoaXMudXNlcklkLHVzZXIpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbG9jYXRpb24ucGF0aCgnL2FkbWluJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWxldGVVc2VyKHVzZXJJZCk6dm9pZCB7XG4gICAgICAgIHRoaXMuVXNlclNlcnZpY2UuZGVsZXRlVXNlcih1c2VySWQpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbG9jYXRpb24ucGF0aCgnL2FkbWluJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgY2FuY2VsKCk6IHZvaWQge1xuXG4gICAgICAgIHRoaXMuJGxvY2F0aW9uLnBhdGgoJy9hZG1pbicpO1xuICAgIH1cbn1cbiJdfQ==
