// <reference path="../typings/tsd.d.ts" />
/// <reference path="./volume-models" />
var VolumeHelpers = (function () {
    function VolumeHelpers() {
    }
    VolumeHelpers.init = function () {
        this.volumeTypes = [
            { id: 1, type: 'Distribute' },
            { id: 2, type: 'Distributed Replicate' },
            { id: 3, type: 'Replicate' }
        ];
        this.volumeStates = [
            { id: 0, state: 'Up' },
            { id: 1, state: 'Warning' },
            { id: 2, state: 'Down' },
            { id: 3, state: 'Unknown' },
            { id: 4, state: 'Created' }
        ];
        this.tierList = [
            { id: 1, type: 'Hot' }
        ];
        this.targetSizeUnits = [
            { id: 1, unit: 'GB' },
            { id: 2, unit: 'TB' }
        ];
        this.disperseOptions = [
            { id: 1, type: 'RAID-6', desc: '8 + 2 (8 data disks + 2 parity disks)' },
            { id: 2, type: 'RAID-6 (E)', desc: '8 + 3 (8 data disks + 3 parity disks)' }
        ];
    };
    VolumeHelpers.getStorageDevicesForVolumeBasic = function (targetSize, copyCount, devicesList) {
        var selectedDevices = [];
        var size = 0;
        var iter = 0;
        while (size < targetSize) {
            var subVolSize = 0;
            _.each(_.range(copyCount), function (copyNo) {
                var device = devicesList[copyNo][iter];
                if (subVolSize === 0) {
                    device.repStart = true;
                }
                else {
                    device.repStart = false;
                }
                device.repSet = iter;
                subVolSize = device.size > subVolSize ? device.size : subVolSize;
                selectedDevices.push(device);
            });
            iter++;
            size = size + subVolSize;
        }
        return selectedDevices;
    };
    ;
    VolumeHelpers.getVolumeSize = function (devices, copyCount) {
        var volumeSize = 0;
        for (var subVol = 0; subVol < devices.length / copyCount; subVol++) {
            var subVolSize = 0;
            _.each(_.range(copyCount), function (copyNo) {
                var device = devices[subVol * copyCount + copyNo];
                subVolSize = device.size > subVolSize ? device.size : subVolSize;
            });
            volumeSize = volumeSize + subVolSize;
        }
        return volumeSize;
    };
    ;
    VolumeHelpers.getVolumeType = function (id) {
        return _.find(this.volumeTypes, function (type) {
            return type.id === id;
        });
    };
    VolumeHelpers.getVolumeState = function (id) {
        return _.find(this.volumeStates, function (state) {
            return state.id === id;
        });
    };
    VolumeHelpers.getCopiesList = function () {
        return this.volumeCopiesList;
    };
    VolumeHelpers.getRecomendedCopyCount = function () {
        return this.copyCountRecomended;
    };
    VolumeHelpers.getTierList = function () {
        return this.tierList;
    };
    VolumeHelpers.getTargetSizeUnits = function () {
        return this.targetSizeUnits;
    };
    VolumeHelpers.getDisperseOptions = function () {
        return this.disperseOptions;
    };
    VolumeHelpers.volumeCopiesList = [2, 3, 4];
    VolumeHelpers.copyCountRecomended = 3;
    return VolumeHelpers;
})();
exports.VolumeHelpers = VolumeHelpers;
VolumeHelpers.init();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvdm9sdW1lcy92b2x1bWUtaGVscGVycy50cyJdLCJuYW1lcyI6WyJWb2x1bWVIZWxwZXJzIiwiVm9sdW1lSGVscGVycy5jb25zdHJ1Y3RvciIsIlZvbHVtZUhlbHBlcnMuaW5pdCIsIlZvbHVtZUhlbHBlcnMuZ2V0U3RvcmFnZURldmljZXNGb3JWb2x1bWVCYXNpYyIsIlZvbHVtZUhlbHBlcnMuZ2V0Vm9sdW1lU2l6ZSIsIlZvbHVtZUhlbHBlcnMuZ2V0Vm9sdW1lVHlwZSIsIlZvbHVtZUhlbHBlcnMuZ2V0Vm9sdW1lU3RhdGUiLCJWb2x1bWVIZWxwZXJzLmdldENvcGllc0xpc3QiLCJWb2x1bWVIZWxwZXJzLmdldFJlY29tZW5kZWRDb3B5Q291bnQiLCJWb2x1bWVIZWxwZXJzLmdldFRpZXJMaXN0IiwiVm9sdW1lSGVscGVycy5nZXRUYXJnZXRTaXplVW5pdHMiLCJWb2x1bWVIZWxwZXJzLmdldERpc3BlcnNlT3B0aW9ucyJdLCJtYXBwaW5ncyI6IkFBQUEsMkNBQTJDO0FBQzNDLHdDQUF3QztBQUl4QztJQUFBQTtJQTJHQUMsQ0FBQ0E7SUFsR1VELGtCQUFJQSxHQUFYQTtRQUNJRSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQTtZQUNmQSxFQUFFQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxJQUFJQSxFQUFFQSxZQUFZQSxFQUFFQTtZQUM3QkEsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsdUJBQXVCQSxFQUFFQTtZQUN4Q0EsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsRUFBRUEsV0FBV0EsRUFBRUE7U0FDL0JBLENBQUNBO1FBRUZBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBO1lBQ2hCQSxFQUFFQSxFQUFFQSxFQUFFQSxDQUFDQSxFQUFFQSxLQUFLQSxFQUFFQSxJQUFJQSxFQUFFQTtZQUN0QkEsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsS0FBS0EsRUFBRUEsU0FBU0EsRUFB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QUFDQTtJQUVhUix5QkFBV0EsR0FBekJBO1FBQ0lTLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO0lBQ3pCQSxDQUFDQTtJQUVhVCxnQ0FBa0JBLEdBQWhDQTtRQUNJVSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxlQUFlQSxDQUFDQTtJQUNoQ0EsQ0FBQ0E7SUFFYVYsZ0NBQWtCQSxHQUFoQ0E7UUFDSVcsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsZUFBZUEsQ0FBQ0E7SUFDaENBLENBQUNBO0lBdkdjWCw4QkFBZ0JBLEdBQUdBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO0lBQzdCQSxpQ0FBbUJBLEdBQUdBLENBQUNBLENBQUNBO0lBdUczQ0Esb0JBQUNBO0FBQURBLENBM0dBLEFBMkdDQSxJQUFBO0FBM0dZLHFCQUFhLGdCQTJHekIsQ0FBQTtBQUVELGFBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyIsImZpbGUiOiJtb2R1bGVzL3ZvbHVtZXMvdm9sdW1lLWhlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL3ZvbHVtZS1tb2RlbHNcIiAvPlxuXG5pbXBvcnQge1ZvbHVtZVR5cGUsIFZvbHVtZVN0YXRlLCBUaWVyLCBTaXplVW5pdCwgRGlzcGVyc2VPcHRpb259IGZyb20gJy4vdm9sdW1lLW1vZGVscyc7XG5cbmV4cG9ydCBjbGFzcyBWb2x1bWVIZWxwZXJzIHtcbiAgICBwcml2YXRlIHN0YXRpYyB2b2x1bWVUeXBlczogQXJyYXk8Vm9sdW1lVHlwZT47XG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9sdW1lU3RhdGVzOiBBcnJheTxWb2x1bWVTdGF0ZT47XG4gICAgcHJpdmF0ZSBzdGF0aWMgdm9sdW1lQ29waWVzTGlzdCA9IFsyLCAzLCA0XTtcbiAgICBwcml2YXRlIHN0YXRpYyBjb3B5Q291bnRSZWNvbWVuZGVkID0gMztcbiAgICBwcml2YXRlIHN0YXRpYyB0aWVyTGlzdDogQXJyYXk8VGllcj47XG4gICAgcHJpdmF0ZSBzdGF0aWMgdGFyZ2V0U2l6ZVVuaXRzOiBBcnJheTxTaXplVW5pdD47XG4gICAgcHJpdmF0ZSBzdGF0aWMgZGlzcGVyc2VPcHRpb25zOiBBcnJheTxEaXNwZXJzZU9wdGlvbj47XG5cbiAgICBzdGF0aWMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy52b2x1bWVUeXBlcyA9IFtcbiAgICAgICAgICAgIHsgaWQ6IDEsIHR5cGU6ICdEaXN0cmlidXRlJyB9LFxuICAgICAgICAgICAgeyBpZDogMiwgdHlwZTogJ0Rpc3RyaWJ1dGVkIFJlcGxpY2F0ZScgfSxcbiAgICAgICAgICAgIHsgaWQ6IDMsIHR5cGU6ICdSZXBsaWNhdGUnIH1cbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLnZvbHVtZVN0YXRlcyA9IFtcbiAgICAgICAgICAgIHsgaWQ6IDAsIHN0YXRlOiAnVXAnIH0sXG4gICAgICAgICAgICB7IGlkOiAxLCBzdGF0ZTogJ1dhcm5pbmcnIH0sXG4gICAgICAgICAgICB7IGlkOiAyLCBzdGF0ZTogJ0Rvd24nIH0sXG4gICAgICAgICAgICB7IGlkOiAzLCBzdGF0ZTogJ1Vua25vd24nIH0sXG4gICAgICAgICAgICB7IGlkOiA0LCBzdGF0ZTogJ0NyZWF0ZWQnIH1cbiAgICAgICAgXTtcblxuICAgICAgICB0aGlzLnRpZXJMaXN0ID0gW1xuICAgICAgICAgICAgeyBpZDogMSwgdHlwZTogJ0hvdCcgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMudGFyZ2V0U2l6ZVVuaXRzID0gW1xuICAgICAgICAgICAgeyBpZDogMSwgdW5pdDogJ0dCJyB9LFxuICAgICAgICAgICAgeyBpZDogMiwgdW5pdDogJ1RCJyB9XG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5kaXNwZXJzZU9wdGlvbnMgPSBbXG4gICAgICAgICAgICB7IGlkOiAxLCB0eXBlOiAnUkFJRC02JywgZGVzYzogJzggKyAyICg4IGRhdGEgZGlza3MgKyAyIHBhcml0eSBkaXNrcyknIH0sXG4gICAgICAgICAgICB7IGlkOiAyLCB0eXBlOiAnUkFJRC02IChFKScsIGRlc2M6ICc4ICsgMyAoOCBkYXRhIGRpc2tzICsgMyBwYXJpdHkgZGlza3MpJyB9XG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRTdG9yYWdlRGV2aWNlc0ZvclZvbHVtZUJhc2ljKHRhcmdldFNpemUsIGNvcHlDb3VudCwgZGV2aWNlc0xpc3QpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGV2aWNlcyA9IFtdO1xuICAgICAgICB2YXIgc2l6ZSA9IDA7XG4gICAgICAgIHZhciBpdGVyID0gMDtcbiAgICAgICAgd2hpbGUgKHNpemUgPCB0YXJnZXRTaXplKSB7XG4gICAgICAgICAgICB2YXIgc3ViVm9sU2l6ZSA9IDA7XG4gICAgICAgICAgICBfLmVhY2goXy5yYW5nZShjb3B5Q291bnQpLCBmdW5jdGlvbihjb3B5Tm8pIHtcbiAgICAgICAgICAgICAgICB2YXIgZGV2aWNlID0gZGV2aWNlc0xpc3RbY29weU5vXVtpdGVyXTtcbiAgICAgICAgICAgICAgICBpZiAoc3ViVm9sU2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkZXZpY2UucmVwU3RhcnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlLnJlcFN0YXJ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRldmljZS5yZXBTZXQgPSBpdGVyO1xuICAgICAgICAgICAgICAgIHN1YlZvbFNpemUgPSBkZXZpY2Uuc2l6ZSA+IHN1YlZvbFNpemUgPyBkZXZpY2Uuc2l6ZSA6IHN1YlZvbFNpemU7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWREZXZpY2VzLnB1c2goZGV2aWNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXRlcisrO1xuICAgICAgICAgICAgc2l6ZSA9IHNpemUgKyBzdWJWb2xTaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxlY3RlZERldmljZXM7XG4gICAgfTtcblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Vm9sdW1lU2l6ZShkZXZpY2VzLCBjb3B5Q291bnQpIHtcbiAgICAgICAgdmFyIHZvbHVtZVNpemUgPSAwO1xuICAgICAgICBmb3IgKHZhciBzdWJWb2wgPSAwOyBzdWJWb2wgPCBkZXZpY2VzLmxlbmd0aCAvIGNvcHlDb3VudDsgc3ViVm9sKyspIHtcbiAgICAgICAgICAgIHZhciBzdWJWb2xTaXplID0gMDtcbiAgICAgICAgICAgIF8uZWFjaChfLnJhbmdlKGNvcHlDb3VudCksIGZ1bmN0aW9uKGNvcHlObykge1xuICAgICAgICAgICAgICAgIHZhciBkZXZpY2UgPSBkZXZpY2VzW3N1YlZvbCAqIGNvcHlDb3VudCArIGNvcHlOb107XG4gICAgICAgICAgICAgICAgc3ViVm9sU2l6ZSA9IGRldmljZS5zaXplID4gc3ViVm9sU2l6ZSA/IGRldmljZS5zaXplIDogc3ViVm9sU2l6ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9sdW1lU2l6ZSA9IHZvbHVtZVNpemUgKyBzdWJWb2xTaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2b2x1bWVTaXplO1xuICAgIH07XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldFZvbHVtZVR5cGUoaWQ6IG51bWJlcik6IFZvbHVtZVR5cGUge1xuICAgICAgICByZXR1cm4gXy5maW5kKHRoaXMudm9sdW1lVHlwZXMsIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlLmlkID09PSBpZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRWb2x1bWVTdGF0ZShpZDogbnVtYmVyKTogVm9sdW1lU3RhdGUge1xuICAgICAgICByZXR1cm4gXy5maW5kKHRoaXMudm9sdW1lU3RhdGVzLCBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmlkID09PSBpZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb3BpZXNMaXN0KCk6IEFycmF5PG51bWJlcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy52b2x1bWVDb3BpZXNMaXN0O1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmVjb21lbmRlZENvcHlDb3VudCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5Q291bnRSZWNvbWVuZGVkO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VGllckxpc3QoKTogQXJyYXk8VGllcj4ge1xuICAgICAgICByZXR1cm4gdGhpcy50aWVyTGlzdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldFRhcmdldFNpemVVbml0cygpOiBBcnJheTxTaXplVW5pdD4ge1xuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRTaXplVW5pdHM7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXREaXNwZXJzZU9wdGlvbnMoKTogQXJyYXk8RGlzcGVyc2VPcHRpb24+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGVyc2VPcHRpb25zO1xuICAgIH1cbn1cblxuVm9sdW1lSGVscGVycy5pbml0KCk7XG4iXX0=
