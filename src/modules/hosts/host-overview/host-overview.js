// <reference path="../typings/tsd.d.ts" />
var HostOverviewController = (function () {
    function HostOverviewController(serverService) {
        var _this = this;
        this.serverService = serverService;
        this.isLoading = { summaryData: true, donutChartsData: true, trendsChartsData: true };
        this.isOsd = false;
        this.summary = {};
        this.initialTime = { name: "Last 1 hour", value: "-1h" };
        this.donutCharts = {
            cpu: { data: {}, config: {} },
            memory: { data: {}, config: {} },
            swap: { data: {}, config: {} },
            storage: { data: {}, config: {} },
            network: { data: {}, config: {} }
        };
        this.trendCharts = {
            cpu: { title: "", data: { xData: [], yData: [] }, config: {} },
            memory: { title: "", data: { xData: [], yData: [] }, config: {} },
            swap: { title: "", data: { xData: [], yData: [] }, config: {} },
            storage: { title: "", data: { xData: [], yData: [] }, config: {} },
            network: { title: "", data: { xData: [], yData: [] }, config: {} },
            iop: { title: "", data: { xData: [], yData: [] }, config: {} },
            throughput: { title: "", data: { xData: [], yData: [] }, config: {} },
            latency: { title: "", data: { xData: [], yData: [] }, config: {} }
        };
        this.serverService.get(this.id).then(function (host) {
            _this.host = host;
            if (_this.host.roles.indexOf('OSD') > -1) {
                _this.isOsd = true;
            }
            _this.getHostSummary(host.nodeid);
            _this.changeTimeSlotForUtilization(_this.initialTime);
            _this.changeTimeSlotForPerformance(_this.initialTime);
            _this.changeTimeSlotForNetwork(_this.initialTime);
        });
    }
    HostOverviewController.prototype.getHostSummary = function (nodeid) {
        var _this = this;
        this.serverService.getHostSummary(nodeid).then(function (summary) {
            _this.summary = summary;
            _this.isLoading.summaryData = false;
        });
    };
    HostOverviewController.prototype.getCpuUtilization = function (timeSlot) {
        var _this = this;
        var usage = { "total": 0, "used": 0 };
        if (this.host.utilizations.cpuusage !== undefined) {
            usage = { "total": 100, "used": this.host.utilizations.cpuusage.percentused };
        }
        this.setGraphUtilization(usage, "cpu");
        this.serverService.getHostCpuUtilization(this.host.nodeid, timeSlot.value).then(function (cpu_utilization) {
            _this.setGraphData(cpu_utilization, "cpu", "", "%", "large");
        });
    };
    HostOverviewController.prototype.getMemoryUtilization = function (timeSlot) {
        var _this = this;
        var usage = { "total": 0, "used": 0 };
        if (this.host.utilizations.memoryusage !== undefined) {
            usage = { "total": this.host.utilizations.memoryusage.total, "used": this.host.utilizations.memoryusage.used };
        }
        this.setGraphUtilization(usage, "memory");
        this.serverService.getHostMemoryUtilization(this.host.nodeid, timeSlot.value).then(function (memory_utilization) {
            _this.setGraphData(memory_utilization, "memory", "", "%", "large");
        });
    };
    HostOverviewController.prototype.getSwapUtilization = function (timeSlot) {
        var _this = this;
        var usage = { "total": 0, "used": 0 };
        if (this.host.utilizations.swapusage !== undefined) {
            usage = { "total": this.host.utilizations.swapusage.total, "used": this.host.utilizations.swapusage.used };
        }
        this.setGraphUtilization(usage, "swap");
        this.serverService.getHostSwapUtilization(this.host.nodeid, timeSlot.value).then(function (swap_utilization) {
            _this.setGraphData(swap_utilization, "swap", "", "%", "large");
        });
    };
    HostOverviewController.prototype.getStorageUtilization = function (timeSlot) {
        var _this = this;
        var usage = { "total": 0, "used": 0 };
        if (this.host.utilizations.storageusage !== undefined) {
            usage = { "total": this.host.utilizations.storageusage.total, "used": this.host.utilizations.storageusage.used };
        }
        this.setGraphUtilization(usage, "storage");
        this.serverService.getHostStorageUtilization(this.host.nodeid, timeSlot.value).then(function (storage_utilization) {
            _this.setGraphData(storage_utilization, "storage", "", "%", "large");
        });
    };
    HostOverviewController.prototype.getNetworkUtilization = function (timeSlot) {
        var _this = this;
        var usage = { "total": 0, "used": 0 };
        if (this.host.utilizations.networkusage !== undefined) {
            usage = { "total": this.host.utilizations.networkusage.total, "used": this.host.utilizations.networkusage.used };
        }
        this.setGraphUtilization(usage, "network");
        this.serverService.getHostNetworkUtilization(this.host.nodeid, timeSlot.value).then(function (network_utilization) {
            _this.setGraphData(network_utilization, "network", "", "%", "large");
        });
    };
    HostOverviewController.prototype.getDiskIOPS = function (timeSlot) {
        var _this = this;
        this.serverService.getHostIOPS(this.host.nodeid, timeSlot.value).then(function (iops) {
            _this.setGraphData(iops, "iops", "IOPS", "", "compact");
        });
    };
    HostOverviewController.prototype.getThroughput = function (timeSlot) {
        var _this = this;
        this.serverService.getHostThroughput(this.host.nodeid, timeSlot.value).then(function (throughput) {
            _this.setGraphData(throughput, "throughput", "Network Throughput", "B/s", "compact");
        });
    };
    HostOverviewController.prototype.getNetworkLatency = function (timeSlot) {
        var _this = this;
        this.serverService.getHostNetworkLatency(this.host.nodeid, timeSlot.value).then(function (network_latency) {
            _this.setGraphData(network_latency, "latency", "Network Latency", "ms", "compact");
        });
    };
    HostOverviewController.prototype.setGraphUtilization = function (usage, graphName) {
        this.donutCharts[graphName].data = usage;
        this.donutCharts[graphName].config.chartId = graphName;
        this.donutCharts[graphName].config.thresholds = { 'warning': '60', 'error': '90' };
        this.donutCharts[graphName].config.tooltipFn = function (d) {
            return '<span class="donut-tooltip-pf"style="white-space: nowrap;">' +
                ((d[0].value * 100) / usage.total).toFixed(1) + '% ' + d[0].name +
                '</span>';
        };
        this.donutCharts[graphName].config.centerLabelFn = function () {
            return ((usage.used * 100) / usage.total).toFixed(1) + "%";
        };
        this.isLoading.donutChartsData = false;
    };
    HostOverviewController.prototype.setGraphData = function (graphArray, graphName, graphTitle, graphUnits, graphLayout) {
        var times = [];
        var used = [];
        times.push("dates");
        used.push("used");
        var isDataAvailable = false;
        if (graphArray.length !== 0) {
            var usageDataArray = graphArray[0].datapoints;
            isDataAvailable = (usageDataArray.length > 0 ? true : false);
            for (var index in usageDataArray) {
                var subArray = usageDataArray[index];
                times.push(new Date(subArray[1]));
                used.push(subArray[0].toFixed(1));
            }
        }
        this.trendCharts[graphName] = {
            title: graphTitle,
            data: {
                dataAvailable: isDataAvailable,
                total: 100,
                xData: times,
                yData: used
            },
            config: {
                chartId: graphName,
                title: graphTitle,
                layout: graphLayout,
                valueType: 'actual',
                units: graphUnits,
                tooltipFn: function (d) {
                    return '<span class="donut-tooltip-pf">' +
                        d[0].value + ' ' + graphUnits +
                        '</span>';
                }
            }
        };
        this.isLoading.trendsChartsData = false;
    };
    HostOverviewController.prototype.changeTimeSlotForUtilization = function (time) {
        this.getCpuUtilization(time);
        this.getMemoryUtilization(time);
        this.getSwapUtilization(time);
        this.getStorageUtilization(time);
    };
    HostOverviewController.prototype.changeTimeSlotForNetwork = function (time) {
        this.getNetworkUtilization(time);
    };
    HostOverviewController.prototype.changeTimeSlotForPerformance = function (time) {
        this.getDiskIOPS(time);
        this.getThroughput(time);
        this.getNetworkLatency(time);
    };
    //Services that are used in this class.
    HostOverviewController.$inject = [
        'ServerService'
    ];
    return HostOverviewController;
})();
exports.HostOverviewController = HostOverviewController;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvaG9zdHMvaG9zdC1vdmVydmlldy9ob3N0LW92ZXJ2aWV3LnRzIl0sIm5hbWVzIjpbIkhvc3RPdmVydmlld0NvbnRyb2xsZXIiLCJIb3N0T3ZlcnZpZXdDb250cm9sbGVyLmNvbnN0cnVjdG9yIiwiSG9zdE92ZXJ2aWV3Q29udHJvbGxlci5nZXRIb3N0U3VtbWFyeSIsIkhvc3RPdmVydmlld0NvbnRyb2xsZXIuZ2V0Q3B1VXRpbGl6YXRpb24iLCJIb3N0T3ZlcnZpZXdDb250cm9sbGVyLmdldE1lbW9yeVV0aWxpemF0aW9uIiwiSG9zdE92ZXJ2aWV3Q29udHJvbGxlci5nZXRTd2FwVXRpbGl6YXRpb24iLCJIb3N0T3ZlcnZpZXdDb250cm9sbGVyLmdldFN0b3JhZ2VVdGlsaXphdGlvbiIsIkhvc3RPdmVydmlld0NvbnRyb2xsZXIuZ2V0TmV0d29ya1V0aWxpemF0aW9uIiwiSG9zdE92ZXJ2aWV3Q29udHJvbGxlci5nZXREaXNrSU9QUyIsIkhvc3RPdmVydmlld0NvbnRyb2xsZXIuZ2V0VGhyb3VnaHB1dCIsIkhvc3RPdmVydmlld0NvbnRyb2xsZXIuZ2V0TmV0d29ya0xhdGVuY3kiLCJIb3N0T3ZlcnZpZXdDb250cm9sbGVyLnNldEdyYXBoVXRpbGl6YXRpb24iLCJIb3N0T3ZlcnZpZXdDb250cm9sbGVyLnNldEdyYXBoRGF0YSIsIkhvc3RPdmVydmlld0NvbnRyb2xsZXIuY2hhbmdlVGltZVNsb3RGb3JVdGlsaXphdGlvbiIsIkhvc3RPdmVydmlld0NvbnRyb2xsZXIuY2hhbmdlVGltZVNsb3RGb3JOZXR3b3JrIiwiSG9zdE92ZXJ2aWV3Q29udHJvbGxlci5jaGFuZ2VUaW1lU2xvdEZvclBlcmZvcm1hbmNlIl0sIm1hcHBpbmdzIjoiQUFBQSwyQ0FBMkM7QUFLM0M7SUFlSUEsZ0NBQW9CQSxhQUE0QkE7UUFmcERDLGlCQXdNQ0E7UUF6THVCQSxrQkFBYUEsR0FBYkEsYUFBYUEsQ0FBZUE7UUFDeENBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLEVBQUVBLFdBQVdBLEVBQUVBLElBQUlBLEVBQUVBLGVBQWVBLEVBQUVBLElBQUlBLEVBQUVBLGdCQUFnQkEsRUFBRUEsSUFBSUEsRUFBRUEsQ0FBQ0E7UUFDdEZBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLEtBQUtBLENBQUNBO1FBQ25CQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxFQUFFQSxDQUFDQTtRQUNsQkEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsRUFBRUEsSUFBSUEsRUFBRUEsYUFBYUEsRUFBRUEsS0FBS0EsRUFBRUEsS0FBS0EsRUFBRUEsQ0FBQ0E7UUFDekRBLElBQUlBLENBQUNBLFdBQVdBLEdBQUdBO1lBQ2ZBLEdBQUdBLEVBQUNBLEVBQUNBLElBQUlBLEVBQUNBLEVBQUVBLEVBQUNBLE1BQU1BLEVBQUNBLEVBQUVBLEVBQUNBO1lBQ3ZCQSxNQUFNQSxFQUFDQSxFQUFDQSxJQUFJQSxFQUFDQSxFQUFFQSxFQUFDQSxNQUFNQSxFQUFDQSxFQUFFQSxFQUFDQTtZQUMxQkEsSUFBSUEsRUFBQ0EsRUFBQ0EsSUFBSUEsRUFBQ0EsRUFBRUEsRUFBQ0EsTUFBTUEsRUFBQ0EsRUFBRUEsRUFBQ0E7WUFDeEJBLE9BQU9BLEVBQUNBLEVBQUNBLElBQUlBLEVBQUNBLEVBQUVBLEVBQUNBLE1BQU1BLEVBQUNBLEVBQUVBLEVBQUNBO1lBQzNCQSxPQUFPQSxFQUFDQSxFQUFDQSxJQUFJQSxFQUFDQSxFQUFFQSxFQUFDQSxNQUFNQSxFQUFDQSxFQUFFQSxFQUFDQTtTQUM5QkEsQ0FBQ0E7UUFDRkEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0E7WUFDZkEsR0FBR0EsRUFBRUEsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsSUFBSUEsRUFBQ0EsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsRUFBQ0EsTUFBTUEsRUFBQ0EsRUFBRUEsRUFBQ0E7WUFDbERBLE1BQU1BLEVBQUVBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVBLEVBQUNBLElBQUlBLEVBQUNBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVBLEVBQUNBLEVBQUNBLE1BQU1BLEVBQUNBLEVBQUVBLEVBQUNBO1lBQ3JEQSxJQUFJQSxFQUFFQSxFQUFDQSxLQUFLQSxFQUFDQSxFQUFFQSxFQUFDQSxJQUFJQSxFQUFDQSxFQUFDQSxLQUFLQSxFQUFDQSxFQUFFQSxFQUFDQSxLQUFLQSxFQUFDQSxFQUFFQSxFQUFDQSxFQUFDQSxNQUFNQSxFQUFDQSxFQUFFQSxFQUFDQTtZQUNuREEsT0FBT0EsRUFBRUEsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsSUFBSUEsRUFBQ0EsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsRUFBQ0EsTUFBTUEsRUFBQ0EsRUFBRUEsRUFBQ0E7WUFDdERBLE9BQU9BLEVBQUVBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVBLEVBQUNBLElBQUlBLEVBQUNBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVBLEVBQUNBLEVBQUNBLE1BQU1BLEVBQUNBLEVBQUVBLEVBQUNBO1lBQ3REQSxHQUFHQSxFQUFFQSxFQUFDQSxLQUFLQSxFQUFDQSxFQUFFQSxFQUFDQSxJQUFJQSxFQUFDQSxFQUFDQSxLQUFLQSxFQUFDQSxFQUFFQSxFQUFDQSxLQUFLQSxFQUFDQSxFQUFFQSxFQUFDQSxFQUFDQSxNQUFNQSxFQUFDQSxFQUFFQSxFQUFDQTtZQUNsREEsVUFBVUEsRUFBRUEsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsSUFBSUEsRUFBQ0EsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsS0FBS0EsRUFBQ0EsRUFBRUEsRUFBQ0EsRUFBQ0EsTUFBTUEsRUFBQ0EsRUFBRUEsRUFBQ0E7WUFDekRBLE9BQU9BLEVBQUVBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVBLEVBQUNBLElBQUlBLEVBQUNBLEVBQUNBLEtBQUtBLEVBQUNBLEVBQUVB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QTtRQUM3QkEsSUFBSUEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNoQ0EsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUM5QkEsSUFBSUEsQ0FBQ0EscUJBQXFCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUNyQ0EsQ0FBQ0E7SUFFTWIseURBQXdCQSxHQUEvQkEsVUFBZ0NBLElBQVNBO1FBQ3JDYyxJQUFJQSxDQUFDQSxxQkFBcUJBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO0lBQ3JDQSxDQUFDQTtJQUVNZCw2REFBNEJBLEdBQW5DQSxVQUFvQ0EsSUFBU0E7UUFDekNlLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1FBQ3ZCQSxJQUFJQSxDQUFDQSxhQUFhQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUN6QkEsSUFBSUEsQ0FBQ0EsaUJBQWlCQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUNqQ0EsQ0FBQ0E7SUE1TERmLHVDQUF1Q0E7SUFDaENBLDhCQUFPQSxHQUFrQkE7UUFDNUJBLGVBQWVBO0tBQ2xCQSxDQUFDQTtJQTJMTkEsNkJBQUNBO0FBQURBLENBeE1BLEFBd01DQSxJQUFBO0FBeE1ZLDhCQUFzQix5QkF3TWxDLENBQUEiLCJmaWxlIjoibW9kdWxlcy9ob3N0cy9ob3N0LW92ZXJ2aWV3L2hvc3Qtb3ZlcnZpZXcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuaW1wb3J0IHtTZXJ2ZXJTZXJ2aWNlfSBmcm9tICcuLi8uLi9yZXN0L3NlcnZlcic7XG5pbXBvcnQge05vZGV9IGZyb20gJy4uLy4uL3Jlc3Qvc2VydmVyJztcblxuZXhwb3J0IGNsYXNzIEhvc3RPdmVydmlld0NvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgaWQ6IHN0cmluZztcbiAgICBwcml2YXRlIGhvc3Q6IE5vZGU7XG4gICAgcHJpdmF0ZSBzdW1tYXJ5OiBhbnk7XG4gICAgcHJpdmF0ZSBpbml0aWFsVGltZTogYW55O1xuICAgIHByaXZhdGUgZG9udXRDaGFydHM6IGFueTtcbiAgICBwcml2YXRlIHRyZW5kQ2hhcnRzOiBhbnk7XG4gICAgcHJpdmF0ZSBpc09zZDogQm9vbGVhbjtcbiAgICBwcml2YXRlIGlzTG9hZGluZzogYW55O1xuXG4gICAgLy9TZXJ2aWNlcyB0aGF0IGFyZSB1c2VkIGluIHRoaXMgY2xhc3MuXG4gICAgc3RhdGljICRpbmplY3Q6IEFycmF5PHN0cmluZz4gPSBbXG4gICAgICAgICdTZXJ2ZXJTZXJ2aWNlJ1xuICAgIF07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNlcnZlclNlcnZpY2U6IFNlcnZlclNlcnZpY2UpIHtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0geyBzdW1tYXJ5RGF0YTogdHJ1ZSwgZG9udXRDaGFydHNEYXRhOiB0cnVlLCB0cmVuZHNDaGFydHNEYXRhOiB0cnVlIH07XG4gICAgICAgICAgICB0aGlzLmlzT3NkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnN1bW1hcnkgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFRpbWUgPSB7IG5hbWU6IFwiTGFzdCAxIGhvdXJcIiwgdmFsdWU6IFwiLTFoXCIgfTtcbiAgICAgICAgICAgIHRoaXMuZG9udXRDaGFydHMgPSB7XG4gICAgICAgICAgICAgICAgY3B1OntkYXRhOnt9LGNvbmZpZzp7fX0sXG4gICAgICAgICAgICAgICAgbWVtb3J5OntkYXRhOnt9LGNvbmZpZzp7fX0sXG4gICAgICAgICAgICAgICAgc3dhcDp7ZGF0YTp7fSxjb25maWc6e319LFxuICAgICAgICAgICAgICAgIHN0b3JhZ2U6e2RhdGE6e30sY29uZmlnOnt9fSxcbiAgICAgICAgICAgICAgICBuZXR3b3JrOntkYXRhOnt9LGNvbmZpZzp7fX1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRyZW5kQ2hhcnRzID0ge1xuICAgICAgICAgICAgICAgIGNwdToge3RpdGxlOlwiXCIsZGF0YTp7eERhdGE6W10seURhdGE6W119LGNvbmZpZzp7fX0sXG4gICAgICAgICAgICAgICAgbWVtb3J5OiB7dGl0bGU6XCJcIixkYXRhOnt4RGF0YTpbXSx5RGF0YTpbXX0sY29uZmlnOnt9fSxcbiAgICAgICAgICAgICAgICBzd2FwOiB7dGl0bGU6XCJcIixkYXRhOnt4RGF0YTpbXSx5RGF0YTpbXX0sY29uZmlnOnt9fSxcbiAgICAgICAgICAgICAgICBzdG9yYWdlOiB7dGl0bGU6XCJcIixkYXRhOnt4RGF0YTpbXSx5RGF0YTpbXX0sY29uZmlnOnt9fSxcbiAgICAgICAgICAgICAgICBuZXR3b3JrOiB7dGl0bGU6XCJcIixkYXRhOnt4RGF0YTpbXSx5RGF0YTpbXX0sY29uZmlnOnt9fSxcbiAgICAgICAgICAgICAgICBpb3A6IHt0aXRsZTpcIlwiLGRhdGE6e3hEYXRhOltdLHlEYXRhOltdfSxjb25maWc6e319LFxuICAgICAgICAgICAgICAgIHRocm91Z2hwdXQ6IHt0aXRsZTpcIlwiLGRhdGE6e3hEYXRhOltdLHlEYXRhOltdfSxjb25maWc6e319LFxuICAgICAgICAgICAgICAgIGxhdGVuY3k6IHt0aXRsZTpcIlwiLGRhdGE6e3hEYXRhOltdLHlEYXRhOltdfSxjb25maWc6e319XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXJ2ZXJTZXJ2aWNlLmdldCh0aGlzLmlkKS50aGVuKChob3N0OmFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5ob3N0LnJvbGVzLmluZGV4T2YoJ09TRCcpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09zZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SG9zdFN1bW1hcnkoaG9zdC5ub2RlaWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlVGltZVNsb3RGb3JVdGlsaXphdGlvbih0aGlzLmluaXRpYWxUaW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVRpbWVTbG90Rm9yUGVyZm9ybWFuY2UodGhpcy5pbml0aWFsVGltZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VUaW1lU2xvdEZvck5ldHdvcmsodGhpcy5pbml0aWFsVGltZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SG9zdFN1bW1hcnkobm9kZWlkOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTZXJ2aWNlLmdldEhvc3RTdW1tYXJ5KG5vZGVpZCkudGhlbigoc3VtbWFyeSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdW1tYXJ5ID0gc3VtbWFyeTtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nLnN1bW1hcnlEYXRhID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDcHVVdGlsaXphdGlvbih0aW1lU2xvdDogYW55KSB7XG4gICAgICAgIHZhciB1c2FnZTogYW55ID0ge1widG90YWxcIjogMCxcInVzZWRcIjogMH07XG4gICAgICAgIGlmKHRoaXMuaG9zdC51dGlsaXphdGlvbnMuY3B1dXNhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXNhZ2UgPSB7IFwidG90YWxcIjoxMDAsIFwidXNlZFwiOiB0aGlzLmhvc3QudXRpbGl6YXRpb25zLmNwdXVzYWdlLnBlcmNlbnR1c2VkIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldEdyYXBoVXRpbGl6YXRpb24odXNhZ2UsIFwiY3B1XCIpO1xuICAgICAgICB0aGlzLnNlcnZlclNlcnZpY2UuZ2V0SG9zdENwdVV0aWxpemF0aW9uKHRoaXMuaG9zdC5ub2RlaWQsdGltZVNsb3QudmFsdWUpLnRoZW4oKGNwdV91dGlsaXphdGlvbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRHcmFwaERhdGEoY3B1X3V0aWxpemF0aW9uLFwiY3B1XCIsXCJcIixcIiVcIixcImxhcmdlXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWVtb3J5VXRpbGl6YXRpb24odGltZVNsb3Q6IGFueSkge1xuICAgICAgICB2YXIgdXNhZ2U6IGFueSA9IHtcInRvdGFsXCI6IDAsXCJ1c2VkXCI6IDB9O1xuICAgICAgICBpZih0aGlzLmhvc3QudXRpbGl6YXRpb25zLm1lbW9yeXVzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVzYWdlID0geyBcInRvdGFsXCI6dGhpcy5ob3N0LnV0aWxpemF0aW9ucy5tZW1vcnl1c2FnZS50b3RhbCwgXCJ1c2VkXCI6IHRoaXMuaG9zdC51dGlsaXphdGlvbnMubWVtb3J5dXNhZ2UudXNlZCB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRHcmFwaFV0aWxpemF0aW9uKHVzYWdlLCBcIm1lbW9yeVwiKTtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTZXJ2aWNlLmdldEhvc3RNZW1vcnlVdGlsaXphdGlvbih0aGlzLmhvc3Qubm9kZWlkLHRpbWVTbG90LnZhbHVlKS50aGVuKChtZW1vcnlfdXRpbGl6YXRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0R3JhcGhEYXRhKG1lbW9yeV91dGlsaXphdGlvbixcIm1lbW9yeVwiLFwiXCIsXCIlXCIsXCJsYXJnZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFN3YXBVdGlsaXphdGlvbih0aW1lU2xvdDogYW55KSB7XG4gICAgICAgIHZhciB1c2FnZTogYW55ID0ge1widG90YWxcIjogMCxcInVzZWRcIjogMH07XG4gICAgICAgIGlmKHRoaXMuaG9zdC51dGlsaXphdGlvbnMuc3dhcHVzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVzYWdlID0geyBcInRvdGFsXCI6dGhpcy5ob3N0LnV0aWxpemF0aW9ucy5zd2FwdXNhZ2UudG90YWwsIFwidXNlZFwiOiB0aGlzLmhvc3QudXRpbGl6YXRpb25zLnN3YXB1c2FnZS51c2VkIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldEdyYXBoVXRpbGl6YXRpb24odXNhZ2UsIFwic3dhcFwiKTtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTZXJ2aWNlLmdldEhvc3RTd2FwVXRpbGl6YXRpb24odGhpcy5ob3N0Lm5vZGVpZCx0aW1lU2xvdC52YWx1ZSkudGhlbigoc3dhcF91dGlsaXphdGlvbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRHcmFwaERhdGEoc3dhcF91dGlsaXphdGlvbixcInN3YXBcIixcIlwiLFwiJVwiLFwibGFyZ2VcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTdG9yYWdlVXRpbGl6YXRpb24odGltZVNsb3Q6IGFueSkge1xuICAgICAgICB2YXIgdXNhZ2U6IGFueSA9IHtcInRvdGFsXCI6IDAsXCJ1c2VkXCI6IDB9O1xuICAgICAgICBpZih0aGlzLmhvc3QudXRpbGl6YXRpb25zLnN0b3JhZ2V1c2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1c2FnZSA9IHsgXCJ0b3RhbFwiOnRoaXMuaG9zdC51dGlsaXphdGlvbnMuc3RvcmFnZXVzYWdlLnRvdGFsLCBcInVzZWRcIjogdGhpcy5ob3N0LnV0aWxpemF0aW9ucy5zdG9yYWdldXNhZ2UudXNlZCB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRHcmFwaFV0aWxpemF0aW9uKHVzYWdlLCBcInN0b3JhZ2VcIik7XG4gICAgICAgIHRoaXMuc2VydmVyU2VydmljZS5nZXRIb3N0U3RvcmFnZVV0aWxpemF0aW9uKHRoaXMuaG9zdC5ub2RlaWQsdGltZVNsb3QudmFsdWUpLnRoZW4oKHN0b3JhZ2VfdXRpbGl6YXRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0R3JhcGhEYXRhKHN0b3JhZ2VfdXRpbGl6YXRpb24sXCJzdG9yYWdlXCIsXCJcIixcIiVcIixcImxhcmdlXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmV0d29ya1V0aWxpemF0aW9uKHRpbWVTbG90OiBhbnkpIHtcbiAgICAgICAgdmFyIHVzYWdlOiBhbnkgPSB7XCJ0b3RhbFwiOiAwLFwidXNlZFwiOiAwfTtcbiAgICAgICAgaWYodGhpcy5ob3N0LnV0aWxpemF0aW9ucy5uZXR3b3JrdXNhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXNhZ2UgPSB7IFwidG90YWxcIjp0aGlzLmhvc3QudXRpbGl6YXRpb25zLm5ldHdvcmt1c2FnZS50b3RhbCwgXCJ1c2VkXCI6IHRoaXMuaG9zdC51dGlsaXphdGlvbnMubmV0d29ya3VzYWdlLnVzZWQgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0R3JhcGhVdGlsaXphdGlvbih1c2FnZSwgXCJuZXR3b3JrXCIpO1xuICAgICAgICB0aGlzLnNlcnZlclNlcnZpY2UuZ2V0SG9zdE5ldHdvcmtVdGlsaXphdGlvbih0aGlzLmhvc3Qubm9kZWlkLHRpbWVTbG90LnZhbHVlKS50aGVuKChuZXR3b3JrX3V0aWxpemF0aW9uKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldEdyYXBoRGF0YShuZXR3b3JrX3V0aWxpemF0aW9uLFwibmV0d29ya1wiLFwiXCIsXCIlXCIsXCJsYXJnZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpc2tJT1BTKHRpbWVTbG90OiBhbnkpIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTZXJ2aWNlLmdldEhvc3RJT1BTKHRoaXMuaG9zdC5ub2RlaWQsdGltZVNsb3QudmFsdWUpLnRoZW4oKGlvcHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0R3JhcGhEYXRhKGlvcHMsXCJpb3BzXCIsXCJJT1BTXCIsXCJcIixcImNvbXBhY3RcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaHJvdWdocHV0KHRpbWVTbG90OiBhbnkpIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTZXJ2aWNlLmdldEhvc3RUaHJvdWdocHV0KHRoaXMuaG9zdC5ub2RlaWQsdGltZVNsb3QudmFsdWUpLnRoZW4oKHRocm91Z2hwdXQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0R3JhcGhEYXRhKHRocm91Z2hwdXQsXCJ0aHJvdWdocHV0XCIsXCJOZXR3b3JrIFRocm91Z2hwdXRcIixcIkIvc1wiLFwiY29tcGFjdFwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5ldHdvcmtMYXRlbmN5KHRpbWVTbG90OiBhbnkpIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTZXJ2aWNlLmdldEhvc3ROZXR3b3JrTGF0ZW5jeSh0aGlzLmhvc3Qubm9kZWlkLHRpbWVTbG90LnZhbHVlKS50aGVuKChuZXR3b3JrX2xhdGVuY3kpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0R3JhcGhEYXRhKG5ldHdvcmtfbGF0ZW5jeSxcImxhdGVuY3lcIixcIk5ldHdvcmsgTGF0ZW5jeVwiLFwibXNcIixcImNvbXBhY3RcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRHcmFwaFV0aWxpemF0aW9uKHVzYWdlLCBncmFwaE5hbWUpIHtcbiAgICAgICAgdGhpcy5kb251dENoYXJ0c1tncmFwaE5hbWVdLmRhdGEgPSB1c2FnZVxuICAgICAgICB0aGlzLmRvbnV0Q2hhcnRzW2dyYXBoTmFtZV0uY29uZmlnLmNoYXJ0SWQgPSBncmFwaE5hbWU7XG4gICAgICAgIHRoaXMuZG9udXRDaGFydHNbZ3JhcGhOYW1lXS5jb25maWcudGhyZXNob2xkcyA9IHsnd2FybmluZyc6JzYwJywnZXJyb3InOic5MCd9O1xuICAgICAgICB0aGlzLmRvbnV0Q2hhcnRzW2dyYXBoTmFtZV0uY29uZmlnLnRvb2x0aXBGbiA9IChkKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCJkb251dC10b29sdGlwLXBmXCJzdHlsZT1cIndoaXRlLXNwYWNlOiBub3dyYXA7XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICgoZFswXS52YWx1ZSAqIDEwMCkvdXNhZ2UudG90YWwpLnRvRml4ZWQoMSkgKyAnJSAnICsgZFswXS5uYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kb251dENoYXJ0c1tncmFwaE5hbWVdLmNvbmZpZy5jZW50ZXJMYWJlbEZuID0gKCkgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gKCh1c2FnZS51c2VkICogMTAwKS91c2FnZS50b3RhbCkudG9GaXhlZCgxKSArIFwiJVwiO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzTG9hZGluZy5kb251dENoYXJ0c0RhdGEgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0R3JhcGhEYXRhKGdyYXBoQXJyYXksIGdyYXBoTmFtZSwgZ3JhcGhUaXRsZSwgZ3JhcGhVbml0cywgZ3JhcGhMYXlvdXQpIHtcbiAgICAgICAgdmFyIHRpbWVzID0gW107XG4gICAgICAgIHZhciB1c2VkID0gW107XG4gICAgICAgIHRpbWVzLnB1c2goXCJkYXRlc1wiKTtcbiAgICAgICAgdXNlZC5wdXNoKFwidXNlZFwiKTtcbiAgICAgICAgdmFyIGlzRGF0YUF2YWlsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBpZihncmFwaEFycmF5Lmxlbmd0aCAhPT0gMCApIHtcbiAgICAgICAgICAgIHZhciB1c2FnZURhdGFBcnJheSA9IGdyYXBoQXJyYXlbMF0uZGF0YXBvaW50cztcbiAgICAgICAgICAgIGlzRGF0YUF2YWlsYWJsZSA9ICh1c2FnZURhdGFBcnJheS5sZW5ndGggPiAwID8gdHJ1ZSA6IGZhbHNlKTtcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIHVzYWdlRGF0YUFycmF5KSB7XG4gICAgICAgICAgICAgIHZhciBzdWJBcnJheSA9IHVzYWdlRGF0YUFycmF5W2luZGV4XTtcbiAgICAgICAgICAgICAgdGltZXMucHVzaChuZXcgRGF0ZShzdWJBcnJheVsxXSkpO1xuICAgICAgICAgICAgICB1c2VkLnB1c2goc3ViQXJyYXlbMF0udG9GaXhlZCgxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmVuZENoYXJ0c1tncmFwaE5hbWVdID0ge1xuICAgICAgICAgICAgdGl0bGU6IGdyYXBoVGl0bGUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBkYXRhQXZhaWxhYmxlOiBpc0RhdGFBdmFpbGFibGUsXG4gICAgICAgICAgICAgICAgICB0b3RhbDogMTAwLFxuICAgICAgICAgICAgICAgICAgeERhdGE6IHRpbWVzLFxuICAgICAgICAgICAgICAgICAgeURhdGE6IHVzZWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICBjaGFydElkICAgICAgOiAgZ3JhcGhOYW1lLFxuICAgICAgICAgICAgICAgIHRpdGxlICAgICAgICA6ICBncmFwaFRpdGxlLFxuICAgICAgICAgICAgICAgIGxheW91dCAgICAgICA6ICBncmFwaExheW91dCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGUgICAgOiAnYWN0dWFsJyxcbiAgICAgICAgICAgICAgICB1bml0cyAgICAgICAgOiAgZ3JhcGhVbml0cyxcbiAgICAgICAgICAgICAgICB0b29sdGlwRm4gICAgOiAgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICAnPHNwYW4gY2xhc3M9XCJkb251dC10b29sdGlwLXBmXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZFswXS52YWx1ZSArICcgJyArIGdyYXBoVW5pdHMgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzTG9hZGluZy50cmVuZHNDaGFydHNEYXRhID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGNoYW5nZVRpbWVTbG90Rm9yVXRpbGl6YXRpb24odGltZTogYW55KSB7XG4gICAgICAgIHRoaXMuZ2V0Q3B1VXRpbGl6YXRpb24odGltZSk7XG4gICAgICAgIHRoaXMuZ2V0TWVtb3J5VXRpbGl6YXRpb24odGltZSk7XG4gICAgICAgIHRoaXMuZ2V0U3dhcFV0aWxpemF0aW9uKHRpbWUpO1xuICAgICAgICB0aGlzLmdldFN0b3JhZ2VVdGlsaXphdGlvbih0aW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hhbmdlVGltZVNsb3RGb3JOZXR3b3JrKHRpbWU6IGFueSkge1xuICAgICAgICB0aGlzLmdldE5ldHdvcmtVdGlsaXphdGlvbih0aW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hhbmdlVGltZVNsb3RGb3JQZXJmb3JtYW5jZSh0aW1lOiBhbnkpIHtcbiAgICAgICAgdGhpcy5nZXREaXNrSU9QUyh0aW1lKTtcbiAgICAgICAgdGhpcy5nZXRUaHJvdWdocHV0KHRpbWUpO1xuICAgICAgICB0aGlzLmdldE5ldHdvcmtMYXRlbmN5KHRpbWUpO1xuICAgIH1cblxufVxuIl19
