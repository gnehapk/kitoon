/// <reference path="../../../typings/tsd.d.ts" />
var StorageService = (function () {
    function StorageService(rest) {
        this.rest = rest.withConfig(function (RestangularConfigurer) {
            RestangularConfigurer.setBaseUrl('/api/v1/');
        });
        this.restFull = rest.withConfig(function (RestangularConfigurer) {
            RestangularConfigurer.setBaseUrl('/api/v1/');
            RestangularConfigurer.setFullResponse(true);
        });
    }
    // **getFilteredList**
    // **@returns** a promise with all storages with query string.
    StorageService.prototype.getFilteredList = function (queryString) {
        if (queryString !== undefined) {
            queryString = '?' + queryString;
        }
        else {
            queryString = '';
        }
        return this.rest.all('storages' + queryString).getList().then(function (storages) {
            return storages;
        });
    };
    // **getList**
    // **@returns** a promise with all storages.
    StorageService.prototype.getList = function () {
        return this.rest.all('storages').getList().then(function (storages) {
            return storages;
        });
    };
    // **getListByCluster**
    // **@returns** a promise  with all storages of the cluster.
    StorageService.prototype.getListByCluster = function (clusterId) {
        return this.rest.one('clusters', clusterId).all('storages').getList().then(function (storages) {
            return storages;
        });
    };
    // **getFilteredListByCluster**
    // **@returns** a promise  with all storages of the cluster with query string.
    StorageService.prototype.getFilteredListByCluster = function (clusterId, queryString) {
        if (queryString !== undefined) {
            queryString = '?' + queryString;
        }
        else {
            queryString = '';
        }
        return this.rest.one('clusters', clusterId).all('storages' + queryString).getList().then(function (storages) {
            return storages;
        });
    };
    // **get**
    // **@returns** a promise with storage metadata.
    StorageService.prototype.get = function (clusterId, storageId) {
        return this.rest.one('clusters', clusterId).one('storages', storageId).get().then(function (storage) {
            return storage;
        });
    };
    // **create**
    // **@param** storage - Information about the storage.
    // **@returns** a promise which returns a request id to track the task.
    StorageService.prototype.create = function (clusterId, storage) {
        return this.restFull.one('clusters', clusterId).all('storages').post(storage);
    };
    // **create**
    // **@param** storageId - Information about the storage.
    // **@returns** a promise which returns a request id to track the task.
    StorageService.prototype.delete = function (clusterId, storageId) {
        return this.restFull.one('clusters', clusterId).one('storages', storageId).remove();
    };
    StorageService.prototype.update = function (clusterId, storageId, pool) {
        return this.restFull.one('clusters', clusterId).one('storages', storageId).patch(pool);
    };
    StorageService.$inject = ['Restangular'];
    return StorageService;
})();
exports.StorageService = StorageService;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZXMvcmVzdC9zdG9yYWdlLnRzIl0sIm5hbWVzIjpbIlN0b3JhZ2VTZXJ2aWNlIiwiU3RvcmFnZVNlcnZpY2UuY29uc3RydWN0b3IiLCJTdG9yYWdlU2VydmljZS5nZXRGaWx0ZXJlZExpc3QiLCJTdG9yYWdlU2VydmljZS5nZXRMaXN0IiwiU3RvcmFnZVNlcnZpY2UuZ2V0TGlzdEJ5Q2x1c3RlciIsIlN0b3JhZ2VTZXJ2aWNlLmdldEZpbHRlcmVkTGlzdEJ5Q2x1c3RlciIsIlN0b3JhZ2VTZXJ2aWNlLmdldCIsIlN0b3JhZ2VTZXJ2aWNlLmNyZWF0ZSIsIlN0b3JhZ2VTZXJ2aWNlLmRlbGV0ZSIsIlN0b3JhZ2VTZXJ2aWNlLnVwZGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUEsa0RBQWtEO0FBRWxEO0lBSUlBLHdCQUFZQSxJQUE2QkE7UUFDckNDLElBQUlBLENBQUNBLElBQUlBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLFVBQUNBLHFCQUFxQkE7WUFDOUNBLHFCQUFxQkEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7UUFDakRBLENBQUNBLENBQUNBLENBQUNBO1FBQ0hBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLFVBQVVBLENBQUNBLFVBQUNBLHFCQUFxQkE7WUFDbERBLHFCQUFxQkEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsQ0FBQ0E7WUFDN0NBLHFCQUFxQkEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDaERBLENBQUNBLENBQUNBLENBQUNBO0lBQ1BBLENBQUNBO0lBRURELHNCQUFzQkE7SUFDdEJBLDhEQUE4REE7SUFDOURBLHdDQUFlQSxHQUFmQSxVQUFnQkEsV0FBV0E7UUFDdkJFLEVBQUVBLENBQUFBLENBQUNBLFdBQVdBLEtBQUtBLFNBQVNBLENBQUNBLENBQUFBLENBQUNBO1lBQ3pCQSxXQUFXQSxHQUFHQSxHQUFHQSxHQUFDQSxXQUFXQSxDQUFD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QUNBO0lBRURQLGFBQWFBO0lBQ2JBLHdEQUF3REE7SUFDeERBLHVFQUF1RUE7SUFDdkVBLCtCQUFNQSxHQUFOQSxVQUFPQSxTQUFTQSxFQUFFQSxTQUFTQTtRQUN2QlEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBVUEsRUFBRUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBVUEsRUFBRUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0E7SUFDeEZBLENBQUNBO0lBRURSLCtCQUFNQSxHQUFOQSxVQUFPQSxTQUFTQSxFQUFFQSxTQUFTQSxFQUFFQSxJQUFJQTtRQUM3QlMsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBVUEsRUFBRUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBVUEsRUFBRUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7SUFDM0ZBLENBQUNBO0lBN0VNVCxzQkFBT0EsR0FBa0JBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBO0lBOEVwREEscUJBQUNBO0FBQURBLENBakZBLEFBaUZDQSxJQUFBO0FBakZZLHNCQUFjLGlCQWlGMUIsQ0FBQSIsImZpbGUiOiJtb2R1bGVzL3Jlc3Qvc3RvcmFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuZXhwb3J0IGNsYXNzIFN0b3JhZ2VTZXJ2aWNlIHtcbiAgICByZXN0OiByZXN0YW5ndWxhci5JU2VydmljZTtcbiAgICByZXN0RnVsbDogcmVzdGFuZ3VsYXIuSVNlcnZpY2U7XG4gICAgc3RhdGljICRpbmplY3Q6IEFycmF5PHN0cmluZz4gPSBbJ1Jlc3Rhbmd1bGFyJ107XG4gICAgY29uc3RydWN0b3IocmVzdDogcmVzdGFuZ3VsYXIuSUNvbGxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5yZXN0ID0gcmVzdC53aXRoQ29uZmlnKChSZXN0YW5ndWxhckNvbmZpZ3VyZXIpID0+IHtcbiAgICAgICAgICAgIFJlc3Rhbmd1bGFyQ29uZmlndXJlci5zZXRCYXNlVXJsKCcvYXBpL3YxLycpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZXN0RnVsbCA9IHJlc3Qud2l0aENvbmZpZygoUmVzdGFuZ3VsYXJDb25maWd1cmVyKSA9PiB7XG4gICAgICAgICAgICBSZXN0YW5ndWxhckNvbmZpZ3VyZXIuc2V0QmFzZVVybCgnL2FwaS92MS8nKTtcbiAgICAgICAgICAgIFJlc3Rhbmd1bGFyQ29uZmlndXJlci5zZXRGdWxsUmVzcG9uc2UodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICoqZ2V0RmlsdGVyZWRMaXN0KipcbiAgICAvLyAqKkByZXR1cm5zKiogYSBwcm9taXNlIHdpdGggYWxsIHN0b3JhZ2VzIHdpdGggcXVlcnkgc3RyaW5nLlxuICAgIGdldEZpbHRlcmVkTGlzdChxdWVyeVN0cmluZykge1xuICAgICAgICBpZihxdWVyeVN0cmluZyAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICBxdWVyeVN0cmluZyA9ICc/JytxdWVyeVN0cmluZztcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdC5hbGwoJ3N0b3JhZ2VzJyArIHF1ZXJ5U3RyaW5nKS5nZXRMaXN0KCkudGhlbihmdW5jdGlvbihzdG9yYWdlcykge1xuICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2VzO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAqKmdldExpc3QqKlxuICAgIC8vICoqQHJldHVybnMqKiBhIHByb21pc2Ugd2l0aCBhbGwgc3RvcmFnZXMuXG4gICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdC5hbGwoJ3N0b3JhZ2VzJykuZ2V0TGlzdCgpLnRoZW4oZnVuY3Rpb24oc3RvcmFnZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9yYWdlcztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gKipnZXRMaXN0QnlDbHVzdGVyKipcbiAgICAvLyAqKkByZXR1cm5zKiogYSBwcm9taXNlICB3aXRoIGFsbCBzdG9yYWdlcyBvZiB0aGUgY2x1c3Rlci5cbiAgICBnZXRMaXN0QnlDbHVzdGVyKGNsdXN0ZXJJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXN0Lm9uZSgnY2x1c3RlcnMnLCBjbHVzdGVySWQpLmFsbCgnc3RvcmFnZXMnKS5nZXRMaXN0KCkudGhlbihmdW5jdGlvbihzdG9yYWdlcykge1xuICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2VzO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAqKmdldEZpbHRlcmVkTGlzdEJ5Q2x1c3RlcioqXG4gICAgLy8gKipAcmV0dXJucyoqIGEgcHJvbWlzZSAgd2l0aCBhbGwgc3RvcmFnZXMgb2YgdGhlIGNsdXN0ZXIgd2l0aCBxdWVyeSBzdHJpbmcuXG4gICAgZ2V0RmlsdGVyZWRMaXN0QnlDbHVzdGVyKGNsdXN0ZXJJZCwgcXVlcnlTdHJpbmcpIHtcbiAgICAgICAgaWYocXVlcnlTdHJpbmcgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgcXVlcnlTdHJpbmcgPSAnPycrcXVlcnlTdHJpbmc7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICBxdWVyeVN0cmluZyA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3Qub25lKCdjbHVzdGVycycsIGNsdXN0ZXJJZCkuYWxsKCdzdG9yYWdlcycrcXVlcnlTdHJpbmcpLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uKHN0b3JhZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZXM7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vICoqZ2V0KipcbiAgICAvLyAqKkByZXR1cm5zKiogYSBwcm9taXNlIHdpdGggc3RvcmFnZSBtZXRhZGF0YS5cbiAgICBnZXQoY2x1c3RlcklkLCBzdG9yYWdlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzdC5vbmUoJ2NsdXN0ZXJzJywgY2x1c3RlcklkKS5vbmUoJ3N0b3JhZ2VzJywgc3RvcmFnZUlkKS5nZXQoKS50aGVuKGZ1bmN0aW9uKHN0b3JhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9yYWdlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAqKmNyZWF0ZSoqXG4gICAgLy8gKipAcGFyYW0qKiBzdG9yYWdlIC0gSW5mb3JtYXRpb24gYWJvdXQgdGhlIHN0b3JhZ2UuXG4gICAgLy8gKipAcmV0dXJucyoqIGEgcHJvbWlzZSB3aGljaCByZXR1cm5zIGEgcmVxdWVzdCBpZCB0byB0cmFjayB0aGUgdGFzay5cbiAgICBjcmVhdGUoY2x1c3RlcklkLCBzdG9yYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3RGdWxsLm9uZSgnY2x1c3RlcnMnLCBjbHVzdGVySWQpLmFsbCgnc3RvcmFnZXMnKS5wb3N0KHN0b3JhZ2UpO1xuICAgIH1cblxuICAgIC8vICoqY3JlYXRlKipcbiAgICAvLyAqKkBwYXJhbSoqIHN0b3JhZ2VJZCAtIEluZm9ybWF0aW9uIGFib3V0IHRoZSBzdG9yYWdlLlxuICAgIC8vICoqQHJldHVybnMqKiBhIHByb21pc2Ugd2hpY2ggcmV0dXJucyBhIHJlcXVlc3QgaWQgdG8gdHJhY2sgdGhlIHRhc2suXG4gICAgZGVsZXRlKGNsdXN0ZXJJZCwgc3RvcmFnZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3RGdWxsLm9uZSgnY2x1c3RlcnMnLCBjbHVzdGVySWQpLm9uZSgnc3RvcmFnZXMnLCBzdG9yYWdlSWQpLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHVwZGF0ZShjbHVzdGVySWQsIHN0b3JhZ2VJZCwgcG9vbCl7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3RGdWxsLm9uZSgnY2x1c3RlcnMnLCBjbHVzdGVySWQpLm9uZSgnc3RvcmFnZXMnLCBzdG9yYWdlSWQpLnBhdGNoKHBvb2wpO1xuICAgIH1cbn1cbiJdfQ==
